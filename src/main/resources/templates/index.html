<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<title>Employee Management</title>
</head>
<body>
	<h1>Employee Management</h1>
	<a href="/employees/export/excel">Export to Excel</a> |
	<a href="/departments">Manage Departments</a> |
	<a href="/showNewEmployeeForm">Add New Employee</a> |
	<form th:action="@{/logout}" method="post" style="display: inline;">
		<button type="submit">Logout</button>
	</form>

	<hr>
	<form action="/employees/search" method="get">
		<input type="text" name="keyword" placeholder="Search by name">
		<select name="department">
			<option value="">All Departments</option>
			<option th:each="department : ${departments}"
				th:value="${department.name}" th:text="${department.name}"></option>
		</select>
		<button type="submit">Search</button>
	</form>

	<!-- Back to Home Button -->
	<p>
		<a href="/index">Back to Home</a>
	</p>


	<hr>
	<table border="1">
		<thead>
			<tr>
				<th>ID</th>
				<th>First Name</th>
				<th>Last Name</th>
				<th>Email</th>
				<th>Department</th>
				<th>Actions</th>
			</tr>
		</thead>
		<tbody>
			<tr th:each="employee : ${listEmployees}">
				<td th:text="${employee.id}"></td>
				<td><a th:href="@{/employee/{id}(id=${employee.id})}" th:text="${employee.firstName}"></a></td>
				<td th:text="${employee.lastName}"></td>
				<td th:text="${employee.email}"></td>
				<td th:text="${employee.department?.name ?: 'N/A'}"></td>
				<td><a th:href="@{/showFormForUpdate/{id}(id=${employee.id})}">Edit</a>
					|
					<form th:action="@{/deleteEmployee/{id}(id=${employee.id})}"
						method="post" style="display: inline;">
						<button type="submit"
							onclick="return confirm('Are you sure you want to delete this employee?')">Delete</button>
					</form>
			</tr>
		</tbody>
	</table>
	<div>
		<a th:if="${currentPage > 1}"
			th:href="@{/page/{pageNo}(pageNo=${currentPage - 1})}">Previous</a>
		Page <span th:text="${currentPage}"></span> of <span
			th:text="${totalPages}"></span> <a
			th:if="${currentPage < totalPages}"
			th:href="@{/page/{pageNo}(pageNo=${currentPage + 1})}">Next</a>
	</div>
</body>
</html>
